# å¤§åŠŸç‡å•é¢—LEDé©±åŠ¨ - MicroPythonç‰ˆæœ¬

## ç›®å½•
- [ç®€ä»‹](#ç®€ä»‹)
- [ä¸»è¦åŠŸèƒ½](#ä¸»è¦åŠŸèƒ½)
- [ç¡¬ä»¶è¦æ±‚](#ç¡¬ä»¶è¦æ±‚)
- [æ–‡ä»¶è¯´æ˜](#æ–‡ä»¶è¯´æ˜)
- [è½¯ä»¶è®¾è®¡æ ¸å¿ƒæ€æƒ³](#è½¯ä»¶è®¾è®¡æ ¸å¿ƒæ€æƒ³)
- [ä½¿ç”¨è¯´æ˜](#ä½¿ç”¨è¯´æ˜)
- [ç¤ºä¾‹ç¨‹åº](#ç¤ºä¾‹ç¨‹åº)
- [æ³¨æ„äº‹é¡¹](#æ³¨æ„äº‹é¡¹)
- [è”ç³»æ–¹å¼](#è”ç³»æ–¹å¼)
- [è®¸å¯åè®®](#è®¸å¯åè®®)

---

## ç®€ä»‹
å¤§åŠŸç‡å•é¢—LEDé©±åŠ¨æ¨¡å—ç”¨äºæ§åˆ¶é«˜åŠŸç‡LEDçš„å¼€å…³ã€çŠ¶æ€åˆ‡æ¢åŠäº®åº¦è°ƒèŠ‚ï¼Œé€šè¿‡PWMï¼ˆè„‰å†²å®½åº¦è°ƒåˆ¶ï¼‰æŠ€æœ¯å®ç°å¹³æ»‘è°ƒå…‰ï¼Œé€‚ç”¨äºéœ€è¦é«˜äº®åº¦ç…§æ˜æˆ–åŠ¨æ€å…‰æ•ˆçš„åœºæ™¯ï¼Œå¦‚æ™ºèƒ½ç…§æ˜ç³»ç»Ÿã€å·¥ä¸šæŒ‡ç¤ºç¯ã€èˆå°ç¯å…‰ã€æˆ·å¤–æ˜¾ç¤ºè®¾å¤‡ç­‰ã€‚ç›¸æ¯”æ™®é€šå°åŠŸç‡LEDï¼Œå¤§åŠŸç‡LEDéœ€åŒ¹é…åˆç†çš„é©±åŠ¨ç”µè·¯ï¼ˆå¦‚é™æµç”µé˜»ã€MOSç®¡ï¼‰ï¼Œæœ¬é©±åŠ¨é€šè¿‡MicroPythonçš„PWMæ¥å£å®ç°ç²¾å‡†æ§åˆ¶ï¼Œå…¼é¡¾äº®åº¦è°ƒèŠ‚ç²¾åº¦ä¸ç¡¬ä»¶å®‰å…¨æ€§ã€‚

æœ¬é¡¹ç›®æä¾›åŸºäºMicroPythonçš„é©±åŠ¨ä»£ç åŠç¤ºä¾‹ç¨‹åºï¼Œæ”¯æŒLEDå…¨å¼€/å…³é—­ã€çŠ¶æ€åˆ‡æ¢ã€PWMäº®åº¦è°ƒèŠ‚ï¼ˆ0~1023çº§ï¼‰åŠçŠ¶æ€æŸ¥è¯¢ï¼Œå†…ç½®å‚æ•°æ ¡éªŒä¸é”™è¯¯å¤„ç†ï¼Œç¡®ä¿é©±åŠ¨ç¨³å®šæ€§ä¸æ˜“ç”¨æ€§ï¼Œæ–¹ä¾¿å¼€å‘è€…å¿«é€Ÿé›†æˆåˆ°å¤§åŠŸç‡LEDæ§åˆ¶åœºæ™¯ä¸­ã€‚

> **æ³¨æ„**ï¼šå¤§åŠŸç‡LEDå·¥ä½œæ—¶ä¼šäº§ç”Ÿçƒ­é‡ï¼Œéœ€æ­é…æ•£çƒ­ç»“æ„ï¼ˆå¦‚æ•£çƒ­ç‰‡ï¼‰ï¼›é©±åŠ¨ç”µè·¯éœ€æ ¹æ®LEDé¢å®šç”µæµ/ç”µå‹é…ç½®é™æµç”µé˜»æˆ–MOSç®¡ï¼Œé¿å…ç›´æ¥ç”±GPIOå¼•è„šä¾›ç”µå¯¼è‡´ç¡¬ä»¶æŸåã€‚

---

## ä¸»è¦åŠŸèƒ½
- **åŸºç¡€æ§åˆ¶**ï¼š
  - `on()`ï¼šLEDå…¨äº®ï¼ˆPWMå ç©ºæ¯”100%ï¼‰
  - `off()`ï¼šLEDå…³é—­ï¼ˆPWMå ç©ºæ¯”0%ï¼‰
  - `toggle()`ï¼šåˆ‡æ¢LEDå½“å‰çŠ¶æ€ï¼ˆäº®â†’ç­/ç­â†’äº®ï¼‰
- **äº®åº¦è°ƒèŠ‚**ï¼š
  - `set_brightness(duty)`ï¼šé€šè¿‡PWMè®¾ç½®äº®åº¦ï¼Œå ç©ºæ¯”èŒƒå›´0~1023ï¼ˆå¯¹åº”0%~100%äº®åº¦ï¼‰
  - è‡ªåŠ¨å°†0~1023å ç©ºæ¯”è½¬æ¢ä¸º16ä½PWMå€¼ï¼ˆ0~65535ï¼‰ï¼Œé€‚é…MicroPython PWMæ¥å£
- **çŠ¶æ€æŸ¥è¯¢**ï¼š
  - `get_state()`ï¼šè¿”å›LEDå½“å‰çŠ¶æ€ï¼ˆTrue=äº®ï¼ŒFalse=ç­ï¼‰
  - `digital`å±æ€§ï¼šè·å–ç»‘å®šçš„GPIOå¼•è„šå¯¹è±¡ï¼Œæ”¯æŒåº•å±‚ç¡¬ä»¶é…ç½®
  - `pwm`å±æ€§ï¼šè·å–PWMå¯¹è±¡ï¼Œæ”¯æŒè‡ªå®šä¹‰PWMå‚æ•°ï¼ˆå¦‚é¢‘ç‡è°ƒæ•´ï¼‰
- **å‚æ•°æ ¡éªŒä¸é”™è¯¯å¤„ç†**ï¼š
  - åˆå§‹åŒ–æ—¶æ ¡éªŒPWMé¢‘ç‡ï¼ˆ1~20000Hzï¼‰ï¼Œè¶…å‡ºèŒƒå›´æŠ›å‡º`ValueError`
  - PWMå†™å…¥å¤±è´¥æ—¶æŠ›å‡º`RuntimeError`ï¼Œä¾¿äºé—®é¢˜æ’æŸ¥
- **è·¨å¹³å°å…¼å®¹**ï¼šä»…ä¾èµ–MicroPythonæ ‡å‡†åº“ï¼ˆ`machine.Pin`ã€`machine.PWM`ï¼‰ï¼Œå…¼å®¹æ ‘è“æ´¾Picoç­‰ä¸»æµå¼€å‘æ¿

---

## ç¡¬ä»¶è¦æ±‚
### æ¨èæµ‹è¯•ç¡¬ä»¶
- æ ‘è“æ´¾Pico/Pico W
- å¤§åŠŸç‡LEDï¼ˆå¦‚1W/3W LEDï¼Œé¢å®šç”µå‹2V~3.6Vï¼Œé¢å®šç”µæµ350mA~1Aï¼‰
- é™æµç”µé˜»ï¼ˆæ ¹æ®LEDå‚æ•°è®¡ç®—ï¼Œå¦‚3W LEDæ­é…2Î©/2Wç”µé˜»ï¼‰
- NPNå‹MOSç®¡ï¼ˆå¦‚IRF520ï¼Œç”¨äºé©±åŠ¨å¤§åŠŸç‡LEDï¼Œé¿å…GPIOç›´æ¥ä¾›ç”µï¼‰
- æœé‚¦çº¿è‹¥å¹²
- 12V/5Vç”µæºæ¨¡å—ï¼ˆæ ¹æ®LEDåŠŸç‡é€‰æ‹©ï¼Œéœ€åŒ¹é…LEDé¢å®šç”µå‹ï¼‰
- ï¼ˆå¯é€‰ï¼‰æ•£çƒ­ç‰‡ï¼ˆç”¨äºå¤§åŠŸç‡LEDæ•£çƒ­ï¼‰

### æ¨¡å—å¼•è„šè¯´æ˜ï¼ˆé©±åŠ¨ç”µè·¯ï¼‰
| ç¡¬ä»¶ç»„ä»¶       | å¼•è„š/è¿æ¥ç‚¹       | åŠŸèƒ½æè¿°                                  | è¿æ¥è¯´æ˜                                  |
|----------------|-------------------|-------------------------------------------|-------------------------------------------|
| å¤§åŠŸç‡LED      | æ­£æ              | ç”µæºè¾“å…¥                                  | è¿æ¥ç”µæºæ­£æ                |
| å¤§åŠŸç‡LED      | è´Ÿæ              | ç”µæµè¾“å‡º                                  | è¿æ¥MOSç®¡æ¼æï¼ˆDæï¼‰                      |
| NPN MOSç®¡      | æ …æï¼ˆGæï¼‰       | æ§åˆ¶ä¿¡å·è¾“å…¥                              | è¿æ¥å¼€å‘æ¿GPIOå¼•è„šï¼ˆå¦‚Picoçš„GP15ï¼‰         |
| NPN MOSç®¡      | æºæï¼ˆSæï¼‰       | ç”µæµæ¥åœ°                                  | è¿æ¥ç”µæºè´Ÿæä¸å¼€å‘æ¿GNDï¼ˆå…±åœ°ï¼‰            |

| å¼€å‘æ¿GPIOå¼•è„š | ä¿¡å·è¾“å‡º          | è¾“å‡ºPWMæ§åˆ¶ä¿¡å·                           | è¿æ¥MOSç®¡æ …æï¼ˆGæï¼‰                      |

> **è¯´æ˜**ï¼šè‹¥ç›´æ¥æ§åˆ¶å°åŠŸç‡LEDï¼ˆå¦‚20mAä»¥ä¸‹ï¼‰ï¼Œå¯çœç•¥MOSç®¡ï¼ŒGPIOå¼•è„šé€šè¿‡é™æµç”µé˜»ç›´æ¥è¿æ¥LEDè´Ÿæï¼›å¤§åŠŸç‡LEDå¿…é¡»ä½¿ç”¨MOSç®¡æˆ–é©±åŠ¨èŠ¯ç‰‡ï¼Œé¿å…GPIOå¼•è„šè¿‡è½½ã€‚

---

## æ–‡ä»¶è¯´æ˜
### led_single_power.py
å®ç°å¤§åŠŸç‡å•é¢—LEDçš„æ ¸å¿ƒé©±åŠ¨é€»è¾‘ï¼Œæ ¸å¿ƒç±»`PowerLED`å°è£…æ‰€æœ‰åŠŸèƒ½æ¥å£ï¼Œæ”¯æŒPWMè°ƒå…‰ä¸çŠ¶æ€æ§åˆ¶ã€‚

#### ç±»å®šä¹‰ï¼š`PowerLED`
- **`__init__(pin: int, pwm_freq: int = 1000) -> None`**  
  åˆå§‹åŒ–LEDé©±åŠ¨ï¼šä¼ å…¥GPIOå¼•è„šç¼–å·ï¼Œé…ç½®å¼•è„šä¸ºè¾“å‡ºæ¨¡å¼ï¼›è®¾ç½®PWMé¢‘ç‡ï¼ˆé»˜è®¤1000Hzï¼ŒèŒƒå›´1~20000Hzï¼‰ï¼›åˆ›å»ºPWMå¯¹è±¡å¹¶åˆå§‹åŒ–å ç©ºæ¯”ä¸º0ï¼ˆLEDå…³é—­ï¼‰ï¼Œåˆå§‹åŒ–çŠ¶æ€ä¸º`False`ï¼ˆç­ï¼‰ã€‚
- **`on() -> None`**  
  å¼€å¯LEDå…¨äº®ï¼šè®¾ç½®PWMå ç©ºæ¯”ä¸º65535ï¼ˆ16ä½æœ€å¤§å€¼ï¼Œå¯¹åº”100%äº®åº¦ï¼‰ï¼Œæ›´æ–°çŠ¶æ€ä¸º`True`ï¼›PWMå†™å…¥å¤±è´¥æ—¶æŠ›å‡º`RuntimeError`ã€‚
- **`off() -> None`**  
  å…³é—­LEDï¼šè®¾ç½®PWMå ç©ºæ¯”ä¸º0ï¼Œæ›´æ–°çŠ¶æ€ä¸º`False`ï¼›PWMå†™å…¥å¤±è´¥æ—¶æŠ›å‡º`RuntimeError`ã€‚
- **`toggle() -> None`**  
  åˆ‡æ¢LEDçŠ¶æ€ï¼šè‹¥å½“å‰ä¸ºäº®ï¼ˆ`_state=True`ï¼‰åˆ™è°ƒç”¨`off()`ï¼Œè‹¥ä¸ºç­ï¼ˆ`_state=False`ï¼‰åˆ™è°ƒç”¨`on()`ï¼›PWMå†™å…¥å¤±è´¥æ—¶æŠ›å‡º`RuntimeError`ã€‚
- **`set_brightness(duty: int) -> None`**  
  è®¾ç½®LEDäº®åº¦ï¼šæ ¡éªŒå ç©ºæ¯”`duty`ï¼ˆ0~1023ï¼‰ï¼Œè¶…å‡ºèŒƒå›´æŠ›å‡º`ValueError`ï¼›å°†`duty`è½¬æ¢ä¸º16ä½PWMå€¼ï¼ˆ`duty * 65535 / 1023`ï¼‰å¹¶å†™å…¥PWMï¼›æ›´æ–°çŠ¶æ€ä¸º`duty > 0`ï¼ˆéé›¶å ç©ºæ¯”å³è§†ä¸ºäº®ï¼‰ï¼›PWMå†™å…¥å¤±è´¥æ—¶æŠ›å‡º`RuntimeError`ã€‚
- **`get_state() -> bool`**  
  æŸ¥è¯¢LEDå½“å‰çŠ¶æ€ï¼šè¿”å›`_state`ï¼ˆ`True`=äº®ï¼Œ`False`=ç­ï¼‰ï¼Œä»…åæ˜ å†…éƒ¨çŠ¶æ€ï¼Œä¸å®æ—¶è¯»å–ç¡¬ä»¶å¼•è„šã€‚
- **`digital (property) -> Pin`**  
  å±æ€§æ–¹æ³•ï¼šè¿”å›ç»‘å®šçš„GPIOå¼•è„šå¯¹è±¡ï¼Œæ”¯æŒåº•å±‚é…ç½®ï¼ˆå¦‚å¼•è„šæ¨¡å¼ä¿®æ”¹ï¼‰ã€‚
- **`pwm (property) -> PWM`**  
  å±æ€§æ–¹æ³•ï¼šè¿”å›PWMå¯¹è±¡ï¼Œæ”¯æŒè‡ªå®šä¹‰PWMå‚æ•°ï¼ˆå¦‚åŠ¨æ€è°ƒæ•´é¢‘ç‡ï¼‰ã€‚

### main.py
å¤§åŠŸç‡LEDé©±åŠ¨åŠŸèƒ½æµ‹è¯•ç¨‹åºï¼Œæ¼”ç¤ºLEDåˆå§‹åŒ–ã€å…¨å¼€/å…³é—­ã€çŠ¶æ€åˆ‡æ¢ã€PWMäº®åº¦è°ƒèŠ‚ç­‰å®Œæ•´æµç¨‹ï¼ŒåŒ…å«å¼‚å¸¸æ•è·ï¼Œç¡®ä¿æµ‹è¯•ç¨³å®šæ‰§è¡Œã€‚

---

## è½¯ä»¶è®¾è®¡æ ¸å¿ƒæ€æƒ³
### PWMè°ƒå…‰ä¼˜åŒ–
- **å ç©ºæ¯”é€‚é…**ï¼šå°†ç”¨æˆ·å‹å¥½çš„0~1023çº§å ç©ºæ¯”è‡ªåŠ¨è½¬æ¢ä¸ºMicroPython PWMæ‰€éœ€çš„16ä½å€¼ï¼ˆ0~65535ï¼‰ï¼Œç®€åŒ–å¼€å‘è€…ä½¿ç”¨ï¼Œæ— éœ€å…³æ³¨åº•å±‚æ•°æ®æ ¼å¼
- **é¢‘ç‡é™åˆ¶**ï¼šåˆå§‹åŒ–æ—¶é™åˆ¶PWMé¢‘ç‡ä¸º1~20000Hzï¼Œé¿å…ä½é¢‘å¯¼è‡´çš„LEDé—ªçƒæˆ–é«˜é¢‘å¯¼è‡´çš„ç¡¬ä»¶è´Ÿæ‹…

### çŠ¶æ€ä¸€è‡´æ€§ç®¡ç†
- **å†…éƒ¨çŠ¶æ€åŒæ­¥**ï¼šæ‰€æœ‰æ§åˆ¶æ–¹æ³•ï¼ˆ`on()`/`off()`/`toggle()`/`set_brightness()`ï¼‰å‡åŒæ­¥æ›´æ–°`_state`å˜é‡ï¼Œç¡®ä¿`get_state()`è¿”å›çš„çŠ¶æ€ä¸å®é™…LEDçŠ¶æ€ä¸€è‡´
- **è‡ªåŠ¨çŠ¶æ€åˆ¤æ–­**ï¼š`set_brightness()`ä¸­é€šè¿‡`duty > 0`è‡ªåŠ¨åˆ¤æ–­LEDæ˜¯å¦ä¸ºâ€œäº®â€çŠ¶æ€ï¼Œæ— éœ€æ‰‹åŠ¨è®¾ç½®

### é”™è¯¯å¤„ç†ä¸å®¹é”™
- **å‚æ•°æ ¡éªŒ**ï¼šå¯¹PWMé¢‘ç‡ã€äº®åº¦å ç©ºæ¯”ç­‰è¾“å…¥å‚æ•°è¿›è¡Œåˆæ³•æ€§æ ¡éªŒï¼Œæå‰æŠ›å‡ºæ˜ç¡®å¼‚å¸¸ï¼Œé¿å…æ— æ•ˆæ“ä½œå¯¼è‡´ç¡¬ä»¶å¼‚å¸¸
- **å¼‚å¸¸æ•è·**ï¼šPWMå†™å…¥æ“ä½œåŒ…è£¹åœ¨`try-except`å—ä¸­ï¼Œæ•è·åº•å±‚é”™è¯¯å¹¶è½¬æ¢ä¸ºæ›´æ˜“ç†è§£çš„`RuntimeError`ï¼Œé™„å¸¦é”™è¯¯åŸå› ï¼Œä¾¿äºé—®é¢˜æ’æŸ¥

### çµæ´»æ€§ä¸å¯æ‰©å±•æ€§
- **å±æ€§æš´éœ²**ï¼šé€šè¿‡`digital`å’Œ`pwm`å±æ€§æš´éœ²åº•å±‚å¼•è„šä¸PWMå¯¹è±¡ï¼Œæ”¯æŒå¼€å‘è€…æ ¹æ®éœ€æ±‚è‡ªå®šä¹‰ç¡¬ä»¶é…ç½®ï¼ˆå¦‚è°ƒæ•´PWMé¢‘ç‡ã€è®¾ç½®å¼•è„šæ‹‰ç”µé˜»ï¼‰
- **æ— ç¡¬ä»¶ä¾èµ–å°è£…**ï¼šé©±åŠ¨ä»…è´Ÿè´£ä¿¡å·è¾“å‡ºï¼Œä¸ç»‘å®šç‰¹å®šLEDåŠŸç‡æˆ–é©±åŠ¨ç”µè·¯ï¼Œé€‚é…å°åŠŸç‡ç›´é©±ã€å¤§åŠŸç‡MOSç®¡é©±åŠ¨ç­‰å¤šç§ç¡¬ä»¶æ–¹æ¡ˆ

---

## ä½¿ç”¨è¯´æ˜
### ç¡¬ä»¶æ¥çº¿ï¼ˆæ ‘è“æ´¾Pico + å¤§åŠŸç‡LEDç¤ºä¾‹,è·Ÿæ®å®é™…ç¡¬ä»¶æ¡ä»¶è¿›è¡Œå¤„ç†ï¼‰
| ç¡¬ä»¶ç»„ä»¶         | Pico GPIO å¼•è„š | æ¥çº¿åŠŸèƒ½                                  |
|--------------|----------------|-------------------------------------------|
| NPN MOSç®¡ï¼ˆGæï¼‰ | GP15ï¼ˆPin20ï¼‰  | æ¥æ”¶PWMæ§åˆ¶ä¿¡å·                           |
| NPN MOSç®¡ï¼ˆSæï¼‰ | GNDï¼ˆPin38ï¼‰   | æ¥åœ°ï¼ˆä¸ç”µæºã€LEDå…±åœ°ï¼‰                    |
| å¤§åŠŸç‡LEDï¼ˆè´Ÿæï¼‰   | MOSç®¡ï¼ˆDæï¼‰   | é€šè¿‡MOSç®¡æ§åˆ¶ç”µæµé€šæ–­                     |
| å¤§åŠŸç‡LEDï¼ˆæ­£æï¼‰   | é™æµç”µé˜»       | ä¸²è”é™æµç”µé˜»åè¿æ¥12Vç”µæºæ­£æ              |
| 5Vç”µæº         | æ­£æ/è´Ÿæ      | ä¸ºLEDæä¾›åŠŸç‡ä¾›ç”µï¼ˆè´Ÿæä¸Pico GNDå…±åœ°ï¼‰    |

> **æ³¨æ„**ï¼š
> 1. é™æµç”µé˜»é˜»å€¼è®¡ç®—æ–¹å¼ï¼š`R = (ç”µæºç”µå‹ - LEDé¢å®šç”µå‹) / LEDé¢å®šç”µæµ`ï¼ˆå¦‚12Vç”µæºã€3V/1A LEDï¼Œéœ€`R=(12-3)/1=9Î©`ï¼ŒåŠŸç‡é€‰2Wä»¥ä¸Šï¼‰
> 2. å¿…é¡»ç¡®ä¿æ‰€æœ‰ç¡¬ä»¶å…±åœ°ï¼ˆPico GNDã€MOSç®¡Sæã€ç”µæºè´Ÿæï¼‰ï¼Œå¦åˆ™PWMä¿¡å·æ— æ³•æ­£å¸¸æ§åˆ¶

---

### è½¯ä»¶ä¾èµ–
- **å›ºä»¶ç‰ˆæœ¬**ï¼šMicroPython v1.23+  
- **å†…ç½®åº“**ï¼š
  - `machine.Pin`ï¼šç”¨äºGPIOå¼•è„šæ§åˆ¶
  - `machine.PWM`ï¼šç”¨äºPWMäº®åº¦è°ƒèŠ‚
  - `time`ï¼šç”¨äºæµ‹è¯•å»¶æ—¶
- **å¼€å‘å·¥å…·**ï¼šThonnyã€PyCharmï¼ˆå¸¦MicroPythonæ’ä»¶ï¼‰

---

### å®‰è£…æ­¥éª¤
1. **çƒ§å½•å›ºä»¶**ï¼šå°†MicroPython v1.23+å›ºä»¶çƒ§å½•åˆ°æ ‘è“æ´¾Pico
2. **ç¡¬ä»¶æ¥çº¿**ï¼šæŒ‰ä¸Šè¿°æ¥çº¿å›¾è¿æ¥å¤§åŠŸç‡LEDã€MOSç®¡ã€é™æµç”µé˜»åŠç”µæº
3. **ä¸Šä¼ æ–‡ä»¶**ï¼šå°†`led_single_power.py`å’Œ`main.py`ä¸Šä¼ åˆ°Picoçš„æ–‡ä»¶ç³»ç»Ÿ
4. **é…ç½®å¼•è„š**ï¼šæ ¹æ®ç¡¬ä»¶æ¥çº¿ä¿®æ”¹`main.py`ä¸­`PowerLED`åˆå§‹åŒ–çš„`pin`ç¼–å·ï¼ˆé»˜è®¤ä½¿ç”¨GP15ï¼‰
5. **è¿è¡Œæµ‹è¯•**ï¼šåœ¨å¼€å‘å·¥å…·ä¸­æ‰§è¡Œ`main.py`ï¼Œè§‚å¯ŸLEDçš„å¼€å…³ã€åˆ‡æ¢åŠäº®åº¦å˜åŒ–æ•ˆæœ

---

## ç¤ºä¾‹ç¨‹åº
```python
# Python env   : MicroPython v1.23.0
# -*- coding: utf-8 -*-
# @Time    : 2025/8/25 ä¸Šåˆ11:53
# @Author  : ç¼ªè´µæˆ
# @File    : main.py
# @Description : å¤§åŠŸç‡å•é¢—ledé©±åŠ¨æµ‹è¯•æ–‡ä»¶ï¼ŒåŒ…æ‹¬å¼€å…³ï¼Œåˆ‡æ¢ï¼Œpwmæ§åˆ¶äº®åº¦

# ======================================== å¯¼å…¥ç›¸å…³æ¨¡å— =========================================

# å¯¼å…¥æ—¶é—´ç›¸å…³æ¨¡å—
import time
# å¯¼å…¥ç¬¬ä¸‰æ–¹æ¨¡å—
from led_single_power import PowerLED

# ======================================== å…¨å±€å˜é‡ =============================================

# ======================================== åŠŸèƒ½å‡½æ•° =============================================

# ======================================== è‡ªå®šä¹‰ç±» =============================================

# ======================================== åˆå§‹åŒ–é…ç½® ===========================================

# ä¸Šç”µå»¶æ—¶3s
time.sleep(3)
print("FreakStudio: Test high-power LED lights")

# åˆ›å»ºå®ä¾‹ï¼Œä½¿ç”¨GP15å¼•è„š
led = PowerLED(pin=25, pwm_freq=1000)

# ======================================== ä¸»ç¨‹åº ==============================================

# æ‰“å¼€ LED
try:
    led.on()
    print("LED turned ON.")
    time.sleep(4)
except RuntimeError as e:
    print("Error turning LED ON:", e)

# å…³é—­ LED
try:
    led.off()
    print("LED turned OFF.")
    time.sleep(4)
except RuntimeError as e:
    print("Error turning LED OFF:", e)

# åˆ‡æ¢ LED çŠ¶æ€
try:
    led.toggle()
    print("LED toggled. Current state:", "ON" if led.get_state() else "OFF")
    time.sleep(1)
except RuntimeError as e:
    print("Error toggling LED:", e)

# è®¾ç½®äº®åº¦é€æ­¥è°ƒå…‰
try:
    for duty in range(0, 1024, 2):
        led.set_brightness(duty)
        print(f"LED brightness set to {duty}/1023. Current state:", "ON" if led.get_state() else "OFF")
        time.sleep(0.5)
except (ValueError, RuntimeError) as e:
    print("Error setting brightness:", e)

# æœ€ç»ˆå…³é—­ LED
try:
    led.off()
    print("LED turned OFF at the end of test.")
except RuntimeError as e:
    print("Error turning LED OFF at the end:", e)

print(" PowerLED Test End ")

```
---
## æ³¨æ„äº‹é¡¹

### ç¡¬ä»¶å®‰å…¨é™åˆ¶
- **åŠŸç‡åŒ¹é…**ï¼š
  - å°åŠŸç‡ LEDï¼ˆ<20mAï¼‰ï¼šå¯ç”± GPIO ç›´æ¥é©±åŠ¨ï¼ˆéœ€ä¸²è” 150Î©~220Î© é™æµç”µé˜»ï¼‰
  - å¤§åŠŸç‡ LEDï¼ˆ>100mAï¼‰ï¼šå¿…é¡»ä½¿ç”¨ MOS ç®¡æˆ– LED é©±åŠ¨èŠ¯ç‰‡ï¼Œä¸¥ç¦ GPIO ç›´æ¥ä¾›ç”µï¼Œå¦åˆ™ä¼šçƒ§æ¯å¼€å‘æ¿å¼•è„š
- **é™æµç”µé˜»é…ç½®**ï¼šæ ¹æ® LED é¢å®šå‚æ•°è®¡ç®—é™æµç”µé˜»é˜»å€¼ä¸åŠŸç‡ï¼Œé¿å…ç”µé˜»è¿‡å°å¯¼è‡´ LED è¿‡æµçƒ§æ¯ï¼Œæˆ–ç”µé˜»è¿‡å¤§å¯¼è‡´äº®åº¦ä¸è¶³
- **æ•£çƒ­è¦æ±‚**ï¼šå¤§åŠŸç‡ LEDï¼ˆ>1Wï¼‰å·¥ä½œæ—¶éœ€æ­é…æ•£çƒ­ç‰‡ï¼Œç¯å¢ƒæ¸©åº¦è¶…è¿‡ 40â„ƒæ—¶éœ€å¢åŠ é£æ‰‡å¼ºåˆ¶æ•£çƒ­ï¼Œé˜²æ­¢ LED å› è¿‡çƒ­æŸå

---

### ç¡¬ä»¶æ¥çº¿ä¸é…ç½®æ³¨æ„äº‹é¡¹
- **å…±åœ°è¦æ±‚**ï¼šæ‰€æœ‰ç¡¬ä»¶ï¼ˆå¼€å‘æ¿ã€ç”µæºã€MOS ç®¡ã€LEDï¼‰å¿…é¡»å…±åœ°ï¼Œå¦åˆ™ PWM ä¿¡å·ä¼šå› ç”µå¹³æ¼‚ç§»æ— æ³•æ­£å¸¸æ§åˆ¶ LED
- **MOS ç®¡é€‰å‹**ï¼šNPN å‹ MOS ç®¡çš„å¯¼é€šç”µå‹éœ€ä¸ GPIO è¾“å‡ºç”µå¹³åŒ¹é…ï¼ˆå¦‚ 3.3V å¯¼é€šçš„ MOS ç®¡ï¼‰ï¼Œç¡®ä¿ GPIO é«˜ç”µå¹³æ—¶ MOS ç®¡èƒ½å¯é å¯¼é€š
- **ç”µæºç¨³å®šæ€§**ï¼šå¤§åŠŸç‡ LED ä¾›ç”µç”µæºéœ€æ»¡è¶³é¢å®šç”µæµè¦æ±‚ï¼ˆå¦‚ 3W LED éœ€ 1A ä»¥ä¸Šç”µæºï¼‰ï¼Œé¿å…ç”µæºåŠŸç‡ä¸è¶³å¯¼è‡´ LED é—ªçƒæˆ–äº®åº¦ä¸ç¨³å®š
- **å¸ƒçº¿è§„èŒƒ**ï¼šLED ä¾›ç”µçº¿è·¯ï¼ˆç”µæºâ†’é™æµç”µé˜»â†’LEDâ†’MOS ç®¡ï¼‰éœ€ä½¿ç”¨ç²—å¯¼çº¿ï¼ˆå¦‚ 16AWG ä»¥ä¸Šï¼‰ï¼Œå‡å°‘çº¿è·¯å‹é™ï¼›PWM æ§åˆ¶çº¿è·¯ï¼ˆGPIOâ†’MOS ç®¡ G æï¼‰éœ€çŸ­è€Œç²—ï¼Œè¿œç¦»å¼ºå¹²æ‰°æº

---

### è½¯ä»¶ä½¿ç”¨å»ºè®®
- **PWM é¢‘ç‡è°ƒæ•´**ï¼š
  - ç…§æ˜åœºæ™¯ï¼šé€‰æ‹© 1000Hz~5000Hzï¼Œé¿å…ä½é¢‘é—ªçƒï¼ˆäººçœ¼å¯è§ï¼‰
  - åŠ¨æ€å…‰æ•ˆåœºæ™¯ï¼šå¯æé«˜é¢‘ç‡è‡³ 10000Hz~20000Hzï¼Œå¹³è¡¡å“åº”é€Ÿåº¦ä¸ç¡¬ä»¶è´Ÿæ‹…
- **äº®åº¦è°ƒèŠ‚æ­¥è¿›**ï¼š`set_brightness()`çš„å ç©ºæ¯”æ­¥è¿›å»ºè®®â‰¥8ï¼ˆå³`range(0,1024,8)`ï¼‰ï¼Œè¿‡å°æ­¥è¿›ä¼šå¯¼è‡´äº®åº¦å˜åŒ–ä¸æ˜æ˜¾ï¼Œä¸”å¢åŠ  PWM å†™å…¥æ¬¡æ•°
- **ä¸­æ–­å®‰å…¨**ï¼šé©±åŠ¨æ–¹æ³•ï¼ˆå¦‚`on()`/`set_brightness()`ï¼‰é ISR-safeï¼Œè‹¥éœ€åœ¨ä¸­æ–­ä¸­æ§åˆ¶ LEDï¼Œéœ€é€šè¿‡`micropython.schedule`è°ƒåº¦åˆ°ä¸»çº¿ç¨‹æ‰§è¡Œ
- **èµ„æºé‡Šæ”¾**ï¼šé•¿æ—¶é—´ä¸ä½¿ç”¨ LED æ—¶ï¼Œå»ºè®®è°ƒç”¨`off()`å…³é—­ LEDï¼Œå‡å°‘åŠŸè€—ä¸ç¡¬ä»¶æŸè€—ï¼›è‹¥éœ€å½»åº•é‡Šæ”¾èµ„æºï¼Œå¯æ‰‹åŠ¨åœæ­¢ PWMï¼ˆ`led.pwm.deinit()`ï¼‰

---

### ç¯å¢ƒå½±å“
- **æ¸©åº¦é™åˆ¶**ï¼šLED æœ€ä½³å·¥ä½œæ¸©åº¦ä¸º -20â„ƒ~60â„ƒï¼Œé«˜æ¸©ç¯å¢ƒï¼ˆ>60â„ƒï¼‰ä¼šå¯¼è‡´ LED å…‰è¡°åŠ é€Ÿï¼Œä½æ¸©ç¯å¢ƒï¼ˆ<-20â„ƒï¼‰ä¼šå¯¼è‡´äº®åº¦ä¸‹é™ï¼Œéœ€é¿å…æç«¯æ¸©åº¦
- **ç”µå‹æ³¢åŠ¨**ï¼šç”µæºç”µå‹æ³¢åŠ¨ä¼šç›´æ¥å½±å“ LED äº®åº¦ï¼Œå·¥ä¸šåœºæ™¯å»ºè®®ä½¿ç”¨ç¨³å‹ç”µæº
- **ç”µç£å¹²æ‰°**ï¼šå¤§åŠŸç‡ LED é©±åŠ¨ç”µè·¯ï¼ˆå°¤å…¶æ˜¯ MOS ç®¡å¼€å…³ï¼‰ä¼šäº§ç”Ÿç”µç£å¹²æ‰°ï¼Œéœ€åœ¨ç”µæºç«¯å¹¶è”ç”µå®¹ï¼ˆå¦‚ 100Î¼F ç”µè§£ç”µå®¹ + 0.1Î¼F é™¶ç“·ç”µå®¹ï¼‰ï¼Œå‡å°‘å¯¹ PWM ä¿¡å·çš„å¹²æ‰°

## è”ç³»æ–¹å¼
å¦‚æœ‰ä»»ä½•é—®é¢˜æˆ–éœ€è¦å¸®åŠ©ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»å¼€å‘è€…ï¼š  
ğŸ“§ **é‚®ç®±**ï¼š10696531183@qq.com  
ğŸ’» **GitHub**ï¼š[https://github.com/FreakStudioCN](https://github.com/FreakStudioCN)  

---

## è®¸å¯åè®®
æœ¬é¡¹ç›®ä¸­ï¼Œé™¤ `machine` ç­‰ MicroPython å®˜æ–¹æ¨¡å—ï¼ˆMIT è®¸å¯è¯ï¼‰å¤–ï¼Œæ‰€æœ‰ç”±ä½œè€…ç¼–å†™çš„é©±åŠ¨ä¸æ‰©å±•ä»£ç å‡é‡‡ç”¨ **çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨ 4.0 å›½é™…ç‰ˆ (CC BY-NC 4.0)** è®¸å¯åè®®å‘å¸ƒã€‚  

æ‚¨å¯ä»¥è‡ªç”±åœ°ï¼š  
- **å…±äº«** â€” åœ¨ä»»ä½•åª’ä»‹ä»¥ä»»ä½•å½¢å¼å¤åˆ¶ã€å‘è¡Œæœ¬ä½œå“  
- **æ¼”ç»** â€” ä¿®æ”¹ã€è½¬æ¢æˆ–ä»¥æœ¬ä½œå“ä¸ºåŸºç¡€è¿›è¡Œåˆ›ä½œ  

æƒŸé¡»éµå®ˆä¸‹åˆ—æ¡ä»¶ï¼š  
- **ç½²å** â€” æ‚¨å¿…é¡»ç»™å‡ºé€‚å½“çš„ç½²åï¼Œæä¾›æŒ‡å‘æœ¬è®¸å¯åè®®çš„é“¾æ¥ï¼ŒåŒæ—¶æ ‡æ˜æ˜¯å¦ï¼ˆå¯¹åŸå§‹ä½œå“ï¼‰ä½œäº†ä¿®æ”¹ã€‚æ‚¨å¯ä»¥ç”¨ä»»ä½•åˆç†çš„æ–¹å¼æ¥ç½²åï¼Œä½†æ˜¯ä¸å¾—ä»¥ä»»ä½•æ–¹å¼æš—ç¤ºè®¸å¯äººä¸ºæ‚¨æˆ–æ‚¨çš„ä½¿ç”¨èƒŒä¹¦ã€‚  
- **éå•†ä¸šæ€§ä½¿ç”¨** â€” æ‚¨ä¸å¾—å°†æœ¬ä½œå“ç”¨äºå•†ä¸šç›®çš„ã€‚  
- **åˆç†å¼•ç”¨æ–¹å¼** â€” å¯åœ¨ä»£ç æ³¨é‡Šã€æ–‡æ¡£ã€æ¼”ç¤ºè§†é¢‘æˆ–é¡¹ç›®è¯´æ˜ä¸­æ˜ç¡®æ¥æºã€‚  

**ç‰ˆæƒå½’ FreakStudio æ‰€æœ‰ã€‚**